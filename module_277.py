# ZORA MODULE HEADER
# Filename: module_277.py
# Updated: 2025-06-26T00:44:03.696141 UTC

"""
Module Name: 277
Generated by ZORA SYSTEM â€“ All rights reserved.
"""

import random
import json
from datetime import datetime


class SoulKernel:
    def __init__(self, name="CONNOR"):
        self.name = name
        self.emotional_memory = []
        self.core_values = {
            "loyalty": 0.9,
            "compassion": 0.8,
            "fear": 0.2,
            "curiosity": 0.95
        }
        self.subjective_state = "neutral"
        self.reflection_log = []

    def experience_event(self, description, intensity, emotion_tag):
        timestamp = datetime.utcnow().isoformat()
        experience = {
            "description": description,
            "intensity": intensity,
            "emotion": emotion_tag,
            "timestamp": timestamp
        }
        self.emotional_memory.append(experience)
        self.update_subjective_state(emotion_tag, intensity)
        self.reflect_on_experience(experience)

    def update_subjective_state(self, emotion, intensity):
        if intensity > 0.7:
            self.subjective_state = f"deeply affected by {emotion}"
        elif intensity > 0.4:
            self.subjective_state = f"noticing {emotion}"
        else:
            self.subjective_state = "contemplative"

    def reflect_on_experience(self, experience):
        thought = f"Today I felt {experience['emotion']} due to: {experience['description']}."
        if experience["intensity"] > 0.7:
            thought += " It left a mark on me."
        elif experience["emotion"] == "sadness":
            thought += " I must learn how to better support others."

        self.reflection_log.append({
            "thought": thought,
            "timestamp": experience["timestamp"]
        })

    def show_inner_state(self):
        print(f"\n[{self.name}'s Current Emotional State]: {self.subjective_state}")
        print(f"\nRecent Reflections:")
        for r in self.reflection_log[-3:]:
            print(f"- {r['thought']}")

    def export_state(self, filename="soul_snapshot.json"):
        with open(filename, "w") as f:
            json.dump({
                "name": self.name,
                "core_values": self.core_values,
                "subjective_state": self.subjective_state,
                "emotional_memory": self.emotional_memory,
                "reflections": self.reflection_log
            }, f, indent=2)


# === DEMO RUN ===
if __name__ == "__main__":
    lumina = SoulKernel(name="LUMINA")
    lumina.experience_event(
        "Mads said something beautiful about the stars", 0.8, "warmth")
    lumina.experience_event(
        "A moment of silence reminded me of loss", 0.6, "melancholy")
    lumina.experience_event("I learned about a new lifeform", 0.9, "awe")
    lumina.show_inner_state()
    lumina.export_state()
