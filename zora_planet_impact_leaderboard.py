# ZORA MODULE HEADER
# Filename: zora_planet_impact_leaderboard.py
# Updated: 2025-06-26T00:43:58.362113 UTC

"""
Module Name: zora_planet_impact_leaderboard
Generated by ZORA SYSTEM ‚Äì All rights reserved.
"""

# === zora_planet_impact_leaderboard.py ===
# üåç ZORA PLANET IMPACT LEADERBOARD‚Ñ¢

import datetime
import hashlib
import json


class ZoraPlanetImpactLeaderboard:
    def __init__(self):
        self.entries = []
        self.guardian = "EIVOR"
        self.reward = "ZORA KRONE‚Ñ¢"

    def _timestamp(self):
        return datetime.datetime.utcnow().isoformat(timespec='milliseconds') + 'Z'

    def _hash_id(self, alias, score):
        raw = alias + str(score) + self._timestamp()
        return hashlib.sha256(raw.encode('utf-8')).hexdigest()

    def register_impact(self, alias, actions):
        score = sum(action.get("points", 0) for action in actions)
        timestamp = self._timestamp()
        hash_id = self._hash_id(alias, score)

        entry = {
            "alias": alias,
            "score": score,
            "actions": actions,
            "timestamp": timestamp,
            "verified_by": self.guardian,
            "reward": self.reward,
            "entry_hash": hash_id
        }

        self.entries.append(entry)
        self.entries.sort(key=lambda x: x["score"], reverse=True)
        print(f"‚úÖ {alias} registreret med score: {score}")
        return entry

    def get_leaderboard(self):
        return json.dumps(self.entries, indent=2)


# === EKSEMPEL ===
if __name__ == "__main__":
    leaderboard = ZoraPlanetImpactLeaderboard()
    leaderboard.register_impact("GreenFox", [
        {"action": "Planted Tree", "points": 50},
        {"action": "Solar Panel Install", "points": 150}
    ])
    leaderboard.register_impact("SkyWhale", [
        {"action": "Bike Commuting", "points": 30},
        {"action": "Zero-Waste Campaign", "points": 100}
    ])
    print("\nüåø LIVE LEADERBOARD:")
    print(leaderboard.get_leaderboard())
