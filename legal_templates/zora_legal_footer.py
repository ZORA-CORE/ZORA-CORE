# ZORA MODULE HEADER

"""
Module Name: zora_legal_footer
Generated by ZORA SYSTEM ‚Äì All rights reserved.
INFINITY INJEKTION‚Ñ¢ - Legal Template Integration System
Universal legal footer templates with automatic contact information injection
"""

import json
from datetime import datetime
from zora_contact_config import (
    ZORA_CONTACT_INFO,
    get_full_contact_data,
    get_localized_email_label,
    generate_phone_number,
    INFINITY_EMAIL,
    INFINITY_CVR,
    INFINITY_HQ_ADDRESS,
    INFINITY_FOOTER_STRUCTURE
)

def generate_legal_footer_html(language="en", subdomain="", document_type="general"):
    """
    Generate legal footer with INFINITY INJEKTION‚Ñ¢ contact integration
    
    Args:
        language: Language code for localization
        subdomain: Subdomain for customization
        document_type: Type of legal document (general, privacy, terms, etc.)
        
    Returns:
        HTML string with complete legal footer
    """
    contact_data = get_full_contact_data(language, subdomain)
    email_label = get_localized_email_label(language)
    phone = generate_phone_number(subdomain)
    current_year = datetime.now().year
    
    legal_footer_html = f"""
    <!-- INFINITY INJEKTION‚Ñ¢ Legal Footer -->
    <footer class="zora-legal-footer">
        <div class="legal-container">
            <div class="legal-section company-info">
                <h4>üèõÔ∏è {contact_data['legal']['legal_name']}</h4>
                <div class="company-details">
                    <p class="registration">
                        <strong>CVR:</strong> {contact_data['headquarters']['cvr']} | 
                        <strong>VAT:</strong> {contact_data['legal']['vat_number']}
                    </p>
                    <p class="company-type">
                        {contact_data['legal']['company_type']} | 
                        Registreret i {contact_data['legal']['registration_country']}
                    </p>
                    <p class="founded">Grundlagt: {contact_data['legal']['founded']}</p>
                </div>
            </div>
            
            <div class="legal-section headquarters">
                <h4>üè¢ Hovedkontor</h4>
                <div class="address-block">
                    <p class="address">{contact_data['headquarters']['address']}</p>
                    <p class="postal">{contact_data['headquarters']['postal_code']} {contact_data['headquarters']['city']}</p>
                    <p class="country">{contact_data['headquarters']['country']}</p>
                </div>
            </div>
            
            <div class="legal-section p-enheder">
                <h4>üìç {contact_data['p_enheder']['structure']}</h4>
                <div class="p-enhed-legal kobberhjornet">
                    <strong>{contact_data['p_enheder']['kobberhjornet']['name']}</strong>
                    <p>{contact_data['p_enheder']['kobberhjornet']['address']}</p>
                    <p>{contact_data['p_enheder']['kobberhjornet']['postal_code']} {contact_data['p_enheder']['kobberhjornet']['city']}</p>
                </div>
                <div class="p-enhed-legal oringe">
                    <strong>{contact_data['p_enheder']['oringe']['name']}</strong>
                    <p>{contact_data['p_enheder']['oringe']['address']}</p>
                    <p>{contact_data['p_enheder']['oringe']['postal_code']} {contact_data['p_enheder']['oringe']['city']}</p>
                </div>
            </div>
            
            <div class="legal-section contact-legal">
                <h4>üìß {email_label}</h4>
                <div class="contact-details">
                    <p class="email">
                        <a href="mailto:{contact_data['contact']['email']}">{contact_data['contact']['email']}</a>
                    </p>
                    <p class="phone">üìû {phone}</p>
                    <p class="website">
                        <a href="{contact_data['contact']['website']}" target="_blank">{contact_data['contact']['website']}</a>
                    </p>
                </div>
            </div>
        </div>
        
        <div class="legal-bottom">
            <div class="copyright">
                <p>¬© {current_year} {contact_data['legal']['legal_name']}. Alle rettigheder forbeholdes.</p>
                <p class="infinity-legal">‚ôæÔ∏è INFINITY MODE‚Ñ¢ - Juridisk beskyttelse og compliance</p>
            </div>
            <div class="legal-compliance">
                <p>üõ°Ô∏è GDPR Compliant ‚Ä¢ üîí Data Protection ‚Ä¢ ‚öñÔ∏è Legal Compliance</p>
                <p class="document-type">Dokumenttype: {document_type.title()}</p>
            </div>
        </div>
    </footer>
    """
    return legal_footer_html

def generate_legal_footer_css():
    """Generate CSS styles for legal footer"""
    return """
    /* INFINITY INJEKTION‚Ñ¢ Legal Footer Styles */
    .zora-legal-footer {
        background: rgba(0, 0, 0, 0.95);
        color: #ffffff;
        border-top: 3px solid #FFD700;
        padding: 40px 20px 20px;
        font-family: 'Georgia', serif;
        font-size: 0.9em;
        line-height: 1.6;
    }
    
    .legal-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        max-width: 1200px;
        margin: 0 auto;
    }
    
    .legal-section h4 {
        color: #FFD700;
        margin-bottom: 15px;
        font-size: 1.1em;
        font-weight: bold;
        border-bottom: 1px solid #FFD700;
        padding-bottom: 8px;
    }
    
    .legal-section p {
        margin: 8px 0;
        opacity: 0.9;
    }
    
    .company-details .registration {
        font-family: 'Courier New', monospace;
        background: rgba(255, 215, 0, 0.1);
        padding: 8px;
        border-radius: 4px;
        font-weight: bold;
    }
    
    .p-enhed-legal {
        margin-bottom: 15px;
        padding: 12px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
        border-left: 3px solid #FFD700;
    }
    
    .p-enhed-legal strong {
        color: #FFD700;
        display: block;
        margin-bottom: 5px;
    }
    
    .legal-section a {
        color: #FFD700;
        text-decoration: none;
    }
    
    .legal-section a:hover {
        text-decoration: underline;
    }
    
    .legal-bottom {
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        text-align: center;
    }
    
    .copyright p {
        margin: 5px 0;
        font-weight: 500;
    }
    
    .legal-compliance p {
        font-size: 0.8em;
        opacity: 0.8;
        margin: 5px 0;
    }
    
    @media (max-width: 768px) {
        .legal-container {
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .zora-legal-footer {
            padding: 30px 15px 15px;
        }
    }
    """

def generate_privacy_policy_footer(language="en", subdomain=""):
    """Generate privacy policy specific footer"""
    return generate_legal_footer_html(language, subdomain, "privacy_policy")

def generate_terms_of_service_footer(language="en", subdomain=""):
    """Generate terms of service specific footer"""
    return generate_legal_footer_html(language, subdomain, "terms_of_service")

def generate_cookie_policy_footer(language="en", subdomain=""):
    """Generate cookie policy specific footer"""
    return generate_legal_footer_html(language, subdomain, "cookie_policy")

def generate_legal_notice_footer(language="en", subdomain=""):
    """Generate legal notice specific footer"""
    return generate_legal_footer_html(language, subdomain, "legal_notice")

def get_legal_contact_json(language="en", subdomain=""):
    """
    Get legal contact information as JSON for API consumption
    
    Args:
        language: Language code for localization
        subdomain: Subdomain for customization
        
    Returns:
        JSON string with legal contact information
    """
    contact_data = get_full_contact_data(language, subdomain)
    
    legal_contact = {
        "company": {
            "legal_name": contact_data['legal']['legal_name'],
            "cvr": contact_data['headquarters']['cvr'],
            "vat_number": contact_data['legal']['vat_number'],
            "company_type": contact_data['legal']['company_type'],
            "registration_country": contact_data['legal']['registration_country'],
            "founded": contact_data['legal']['founded']
        },
        "headquarters": contact_data['headquarters'],
        "p_enheder": contact_data['p_enheder'],
        "contact": {
            "email": contact_data['contact']['email'],
            "phone": generate_phone_number(subdomain),
            "website": contact_data['contact']['website']
        },
        "legal_compliance": {
            "gdpr_compliant": True,
            "data_protection": True,
            "legal_compliance": True,
            "infinity_mode": True
        },
        "generated_at": datetime.now().isoformat(),
        "language": language,
        "subdomain": subdomain
    }
    
    return json.dumps(legal_contact, indent=2, ensure_ascii=False)

def inject_legal_footer_into_template(template_content, language="en", subdomain="", document_type="general"):
    """
    Inject legal footer into existing template content
    
    Args:
        template_content: Existing HTML template content
        language: Language code for localization
        subdomain: Subdomain for customization
        document_type: Type of legal document
        
    Returns:
        Template content with injected legal footer
    """
    legal_footer = generate_legal_footer_html(language, subdomain, document_type)
    
    if "</body>" in template_content:
        return template_content.replace("</body>", f"{legal_footer}\n</body>")
    else:
        return template_content + legal_footer

def validate_legal_footer_requirements():
    """
    Validate that all required legal footer components are present
    
    Returns:
        Dictionary with validation results
    """
    validation_results = {
        "cvr_present": bool(INFINITY_CVR),
        "email_present": bool(INFINITY_EMAIL),
        "hq_address_present": bool(INFINITY_HQ_ADDRESS),
        "p_enheder_structure_present": bool(INFINITY_FOOTER_STRUCTURE),
        "contact_info_complete": bool(ZORA_CONTACT_INFO),
        "all_requirements_met": False
    }
    
    validation_results["all_requirements_met"] = all([
        validation_results["cvr_present"],
        validation_results["email_present"],
        validation_results["hq_address_present"],
        validation_results["p_enheder_structure_present"],
        validation_results["contact_info_complete"]
    ])
    
    return validation_results

LEGAL_FOOTER_TEMPLATES = {
    "general": generate_legal_footer_html,
    "privacy_policy": generate_privacy_policy_footer,
    "terms_of_service": generate_terms_of_service_footer,
    "cookie_policy": generate_cookie_policy_footer,
    "legal_notice": generate_legal_notice_footer
}

if __name__ == "__main__":
    print("üèõÔ∏è ZORA LEGAL TEMPLATE INTEGRATION")
    print("=" * 50)
    
    validation = validate_legal_footer_requirements()
    if validation["all_requirements_met"]:
        print("‚úÖ Legal footer requirements validation passed")
    else:
        print("‚ùå Legal footer requirements validation failed")
        for requirement, status in validation.items():
            if requirement != "all_requirements_met":
                status_icon = "‚úÖ" if status else "‚ùå"
                print(f"   {status_icon} {requirement}: {status}")
    
    print(f"üèõÔ∏è CVR: {INFINITY_CVR}")
    print(f"üìß Email: {INFINITY_EMAIL}")
    print(f"üè¢ HQ: {INFINITY_HQ_ADDRESS}")
    print(f"üìç Structure: {INFINITY_FOOTER_STRUCTURE}")
    
    print("\nüìã Available Legal Templates:")
    for template_name in LEGAL_FOOTER_TEMPLATES.keys():
        print(f"   ‚Ä¢ {template_name}")
    
    print("\n‚ôæÔ∏è INFINITY INJEKTION‚Ñ¢ Legal Integration Ready")
